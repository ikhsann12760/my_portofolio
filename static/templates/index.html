<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portofolio Agus Ikhsan Nurrohman — IoT Engineer, Quality Assurance, dan AI Enthusiast. Lihat project, sertifikasi, dan hubungi untuk kolaborasi.">
    <meta property="og:title" content="Portofolio Agus Ikhsan Nurrohman">
    <meta property="og:description" content="IoT Engineer | Quality Assurance | AI Enthusiast. Jelajahi project dan sertifikasi.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="{{ url_for('static', filename='images/profil.jpg') }}">
    <meta name="twitter:card" content="summary_large_image">
    <title>Portofolio AGUS IKHSAN N</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/logo1.png') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Montserrat', Arial, sans-serif; 
            scroll-behavior: smooth;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .nav-link {
            font-weight: 600;
            transition: color 0.3s ease;
        }
        
        .nav-link:hover {
            color: #ffb300 !important;
        }
        
        .hero-section {
            padding-top: 100px;
            padding-bottom: 80px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            text-align: center;
        }
        
        .hero-title {
            font-size: clamp(1.8rem, 3.5vw, 3rem);
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .hero-subtitle {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            opacity: 0.9;
            margin-bottom: 2rem;
            word-break: break-word;
        }
        
        .highlight {
            color: #ffb300;
        }
        
        .section-title {
            font-weight: 700;
            margin-bottom: 2rem;
            letter-spacing: 1px;
            text-align: center;
        }
        
        section {
            padding: 80px 0;
        }
        
        .about-section, .skills-section, .contact-section {
            background: white;
            border-radius: 16px;
            margin: 2rem 0;
            box-shadow: 0 4px 24px rgba(0,0,0,0.08);
        }
        
        .card-img-top {
            width: 100%;
            aspect-ratio: 16 / 9;
            height: auto;
            object-fit: cover;
            border-radius: 12px 12px 0 0;
        }
        
        .project-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .card {
            border-radius: 16px;
            border: none;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
        }
        
.card-body {
    text-align: center;
    padding: 1.5rem;
}

.card-title, .project-details, .lead { word-break: break-word; }
        
        .project-details {
            position: relative;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
        }

        @media (hover: hover) {
            .project-details { opacity: 0; transition: opacity 0.3s ease; }
            .card:hover .project-details { opacity: 1; }
        }
        
        .badge {
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            margin: 0.25rem;
            border-radius: 20px;
            background: linear-gradient(45deg, #ffb300, #ffd54f) !important;
            color: #1a1a1a !important;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(255, 179, 0, 0.3);
        }
        
        .badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 179, 0, 0.4);
            color: #000000 !important;
        }
        
        .btn-primary {
            background: #ffb300;
            border: none;
            color: #222;
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 25px;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: #ffd54f;
            color: #111;
            transform: translateY(-2px);
        }
        
        .btn-outline-light {
            border: 2px solid white;
            color: white;
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 25px;
            transition: all 0.3s ease;
        }
        
        .btn-outline-light:hover {
            background: white;
            color: #1e3c72;
        }
        .exp-toolbar { display: flex; gap: 8px; }
        .toolbar-btn { background-color: #ffb300; color: #222; border: none; padding: 8px; border-radius: 50%; width: clamp(36px, 5vw, 44px); height: clamp(36px, 5vw, 44px); display: flex; align-items: center; justify-content: center; }
        .typing-done { border-right: none !important; animation: none !important; }
        
        .contact-form .form-control {
            border-radius: 12px;
            border: 2px solid #e9ecef;
            padding: 0.75rem 1rem;
            transition: border-color 0.3s ease;
        }
        
        .contact-form .form-control:focus {
            border-color: #ffb300;
            box-shadow: 0 0 0 0.2rem rgba(255, 179, 0, 0.25);
        }
        
        .contact-info {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        
        .contact-info p {
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .contact-info i {
            color: #ffb300;
            margin-right: 0.5rem;
            width: 20px;
        }
        
        .swiper-container {
            width: 100%;
            overflow: hidden;
            position: relative;
        }
        
        .swiper-slide {
            text-align: center;
            transition: transform 0.5s ease-in-out;
        }
        
        .swiper-button-prev, .swiper-button-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: #ffb300;
            color: #222;
            border: none;
            padding: 10px;
            cursor: pointer;
            z-index: 10;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .swiper-button-prev { left: -50px; }
        .swiper-button-next { right: -50px; }
        
        .cert-box {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s ease;
        }

        
        .cert-box:hover {
            transform: translateY(-5px);
        }
        
        .cert-container {
            position: relative;
            padding: 0 clamp(16px, 6vw, 60px);
        }
        
        .social-icons {
            text-align: center;
            margin-top: 2rem;
        }
        
        .social-icons a {
            color: white;
            font-size: 1.5rem;
            margin: 0 1rem;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .social-icons a:hover {
            color: #ffb300;
            transform: translateY(-3px) scale(1.1);
        }
        
        .about-image {
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: none;
            }
        }
        
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .project-container {
                grid-template-columns: 1fr;
            }
            
            .swiper-button-prev, .swiper-button-next, .experience-button-prev, .experience-button-next {
                display: none;
            }

            .card-img-top { height: 180px; }
            .card-body { padding: 1rem; }
            .cert-container { padding: 0 16px; }
            .cta-buttons { display: flex; gap: .5rem; flex-wrap: wrap; justify-content: center; }
            .cta-buttons a { margin-bottom: .25rem; }
            .btn-primary, .btn-outline-light { width: 100%; max-width: 320px; padding: 0.6rem 1.2rem; font-size: 0.95rem; }
            #submitBtn { width: 100%; }
        }

        @media (max-width: 576px) {
            .hero-title { font-size: 1.6rem; }
            .hero-subtitle { font-size: 1rem; }
            section { padding: 60px 0; }
            .card-img-top { height: 160px; }
            .cert-box { padding: 1rem; }
            .toolbar-btn { width: 44px; height: 44px; }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top shadow">
        <div class="container">
            <a class="navbar-brand" href="#home">
                <img src="{{ url_for('static', filename='images/favicon.png') }}" alt="Logo" width="32" class="me-2">
            
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="#skills">Skills</a></li>
                    <li class="nav-item"><a class="nav-link" href="#projects">Projects</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section fade-in">
        <div class="container text-center">
            <img src="{{ url_for('static', filename='images/profil.jpg') }}" class="profile-img" alt="Foto Profil">
            <h1 class="hero-title">Halo, Saya <br><span class="highlight">Agus Ikhsan Nurrohman</span></h1>
            <p class="hero-subtitle typing-text">IoT Engineer | Quality Assurance | AI Enthusiast</p>
            <div class="cta-buttons">
                <a href="#projects" class="btn btn-primary me-3">Lihat Project</a>
                <a href="#contact" class="btn btn-outline-light">Hubungi Saya</a>
            </div>
            
            <!-- Social Icons -->
            <div class="social-icons">
                <a href="https://www.instagram.com/gus_ikhsan11?" target="_blank">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.facebook.com/اخسان نور الرحمن" target="_blank">
                    <i class="fab fa-facebook"></i>
                </a>
                <a href="https://github.com/ikhsann12760" target="_blank">
                    <i class="fab fa-github"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about-section fade-in">
        <div class="container">
            <h2 class="section-title">Tentang Saya</h2>
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="lead">Saya adalah seorang IoT Engineer yang passionate dalam mengembangkan solusi teknologi yang inovatif. Dengan pengalaman di bidang Quality Assurance dan antusiasme terhadap AI, saya berkomitmen untuk menciptakan produk yang berkualitas tinggi.</p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check-circle text-success me-2"></i>2+ Tahun Pengalaman</li>
                        <li><i class="fas fa-check-circle text-success me-2"></i>5+ Project Selesai</li>
                        <li><i class="fas fa-check-circle text-success me-2"></i>6+ Sertifikasi</li>
                    </ul>
                </div>
                <div class="col-md-6 text-center">
            <img src="{{ url_for('static', filename='images/profil.jpg') }}" class="about-image img-fluid" alt="About Me" loading="lazy">
                </div>
            </div>
            
            <!-- Certifications in About Section -->
          <section id="Certifications" class="certifications-divider fade-in">
            <h2 class="certifications-title">Sertifikasi</h2>
            <div class="certifications-section">
                <div class="cert-container">
                    <button class="swiper-button-prev">&#10094;</button>
                    <div class="swiper-container">
                        <div class="swiper-wrapper">
                            {% for cert in certifications %}
                            <div class="swiper-slide">
                                <div class="cert-box">
                                    {% set lower = cert.image.lower() if cert.image else '' %}
                                    {% if lower.endswith('.pdf') %}
                                        <div class="cert-pdf" data-pdf-url="{{ url_for('serve_image', filename=cert.image) }}">
                                            <canvas class="pdf-canvas" width="600"></canvas>
                                            <p class="mt-2"><a class="btn btn-outline-primary" href="{{ url_for('serve_image', filename=cert.image) }}" target="_blank">Buka Sertifikat (PDF)</a></p>
                                        </div>
                                    {% else %}
                                        <img src="{{ url_for('serve_image', filename=cert.image) }}" class="img-fluid" alt="{{ cert.title }}" loading="lazy">
                                    {% endif %}
                                    <p class="mt-3"><strong>{{ cert.title }}</strong><br>{{ cert.issuer }} ({{ cert.year }})</p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <button class="swiper-button-next">&#10095;</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="skills-section fade-in">
        <div class="container">
            <h2 class="section-title">Skills & Technologies</h2>
            <div class="row justify-content-center">
                <div class="col-md-4 text-center mb-4">
                    <h4 class="mb-3"><i class="fas fa-microchip me-2"></i>IoT & Hardware</h4>
                    <span class="badge">ESP8266</span>
                    <span class="badge">RFID</span>
                    <span class="badge">Arduino</span>
                    <span class="badge">Sensor Networks</span>
                    <span class="badge">Raspberry Pi</span>
                    <span class="badge">ESP32</span>
                </div>
                <div class="col-md-4 text-center mb-4">
                    <h4 class="mb-3"><i class="fas fa-code me-2"></i>Programming</h4>
                    <span class="badge">Python</span>
                    <span class="badge">Flask</span>
                    <span class="badge">HTML/CSS</span>
                    <span class="badge">JavaScript</span>
                    <span class="badge">C++</span>
                    <span class="badge">MQTT</span>
                </div>
                <div class="col-md-4 text-center mb-4">
                    <h4 class="mb-3"><i class="fas fa-tools me-2"></i>Tools & Platforms</h4>
                    <span class="badge">GitHub</span>
                    <span class="badge">Postman</span>
                    <span class="badge">K6</span>
                    <span class="badge">Katalon</span>
                    <span class="badge">JMeter</span>
                    <span class="badge">Arduino IDE</span>
                    <span class="badge">Visual Studio Code</span>
                    <span class="badge">MQTT Explorer</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="container fade-in">
        <h2 class="section-title">Project Saya</h2>
        <div class="project-container">
            {% for project in projects %}
            <div class="card">
                <img src="{{ url_for('serve_image', filename=project.image) }}" class="card-img-top" alt="{{ project.title }}" loading="lazy">
                <div class="card-body">
                    <h5 class="card-title">{{ project.title }}</h5>
                    <p class="project-details">{{ project.desc }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Experience Section -->
        <div class="experience-section mt-5">
            <h2 class="section-title">Pengalaman Kerja</h2>
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <div class="timeline">
                        <!-- Urutan lama ke terbaru -->
                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h4>IoT Engineer</h4>
                                        <h5>PPTIK ITB</h5>
                                        <p class="text-muted">2020 - 2021</p>
                                    </div>
                                    <div class="exp-toolbar">
                                        <button class="toolbar-btn" title="Buka/Tutup" data-bs-toggle="collapse" data-bs-target="#exp3" aria-controls="exp3" aria-expanded="false"><i class="fas fa-chevron-down"></i></button>
                                    </div>
                                </div>
                                <div id="exp3" class="collapse mt-2">
                                    <p>Seminar Online dari Pusat Penelitian Teknologi Informasi dan Komunikasi ITB. Belajar dan mengembangkan proyek IoT dasar.</p>
                                    <ul>
                                        <li>Pengembangan sensor RFID dan juga Pengembangan alat Absensi RFID</li>
                                        <li>Implementasi MQTT untuk pengiriman data dengan RabbitMQ</li>
                                        <li>Dokumentasi proyek IoT</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h4>IoT Engineer</h4>
                                        <h5>PT. Median Talenta Raya</h5>
                                        <p class="text-muted">2022 - Sekarang</p>
                                    </div>
                                    <div class="exp-toolbar">
                                        <button class="toolbar-btn" title="Buka/Tutup" data-bs-toggle="collapse" data-bs-target="#exp1" aria-controls="exp1" aria-expanded="false"><i class="fas fa-chevron-down"></i></button>
                                    </div>
                                </div>
                                <div id="exp1" class="collapse mt-2">
                                    <p>Mengembangkan solusi IoT untuk monitoring dan kontrol sistem. Bertanggung jawab atas desain, implementasi, dan maintenance sistem IoT yang terintegrasi.</p>
                                    <ul>
                                        <li>Mengembangkan sistem monitoring sensor real-time</li>
                                        <li>Implementasi protokol komunikasi IoT (MQTT, HTTP)</li>
                                        <li>Optimasi performa dan keamanan sistem</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h4>Support Data Management</h4>
                                        <h5>Kejaksaan Agung Republik Indonesia</h5>
                                        <p class="text-muted">2024</p>
                                    </div>
                                    <div class="exp-toolbar">
                                        <button class="toolbar-btn" title="Buka/Tutup" data-bs-toggle="collapse" data-bs-target="#exp4" aria-controls="exp4" aria-expanded="false"><i class="fas fa-chevron-down"></i></button>
                                    </div>
                                </div>
                                <div id="exp4" class="collapse mt-2">
                                    <p>Bertujuan untuk memanage data pada database setiap kejaksaan yang ada di Indonesia ke Kejaksaan Agung Jakarta.</p>
                                    <ul>
                                        <li>Menginstall program software di dalam server</li>
                                        <li>Konfigurasi software pada server</li>
                                        <li>Menambahkan agent service pada server</li>
                                        <li>Memindahkan data dari server kejaksaan setiap daerah ke pusat</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h4>Quality Assurance Engineer</h4>
                                        <h5>Kementrian Keuangan Negara Republik Indonesia</h5>
                                        <p class="text-muted">2024 - 2025</p>
                                    </div>
                                    <div class="exp-toolbar">
                                        <button class="toolbar-btn" title="Buka/Tutup" data-bs-toggle="collapse" data-bs-target="#exp2" aria-controls="exp2" aria-expanded="false"><i class="fas fa-chevron-down"></i></button>
                                    </div>
                                </div>
                                <div id="exp2" class="collapse mt-2">
                                    <p>Melakukan testing dan quality assurance untuk aplikasi API dan juga Service yang di buat, kualitas produk sesuai standar perusahaan.</p>
                                    <ul>
                                        <li>Manual testing menggunakan Postman</li>
                                        <li>Performance testing menggunakan K6 dan JMeter</li>
                                        <li>Bug reporting dan tracking Dengan Postman</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- CV Download Section -->
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <h3 class="mb-4">Unduh CV Saya</h3>
                    <div class="cv-buttons">
                        <a href="#" class="btn btn-primary me-3" onclick="viewCV()">
                            <i class="fas fa-eye me-2"></i>Lihat CV
                        </a>
                        <a href="#" class="btn btn-outline-primary" onclick="downloadCV()">
                            <i class="fas fa-download me-2"></i>Unduh CV
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section fade-in">
        <div class="container">
            <h2 class="section-title">Hubungi Saya</h2>
            <div class="row">
                <div class="col-md-6">
                    <form class="contact-form" id="contactForm">
                        <div class="mb-3">
                            <input type="text" class="form-control" name="name" placeholder="Nama Lengkap" required>
                        </div>
                        <div class="mb-3">
                            <input type="email" class="form-control" name="email" placeholder="Email" required>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" name="subject" placeholder="Subjek" required>
                        </div>
                        <div class="mb-3">
                            <textarea class="form-control" name="message" rows="5" placeholder="Pesan" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" id="submitBtn">Kirim Pesan</button>
                    </form>
                    <div id="messageAlert" class="alert" style="display: none; margin-top: 1rem;"></div>
                </div>
                <div class="col-md-6">
                    <div class="contact-info">
                        <h4 class="mb-4">Informasi Kontak</h4>
                        <p><i class="fas fa-envelope"></i> gus.ikhsann12@gmail.com</p>
                        <p><i class="fas fa-phone"></i> +62 838-1611-2959</p>
                        <p><i class="fas fa-map-marker-alt"></i> Indonesia, Jawa Barat</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        var swiper = new Swiper('.swiper-container', {
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            slidesPerView: 1,
            spaceBetween: 10,
            loop: true,
            effect: 'coverflow',
            fadeEffect: { coverflow: true }
        });
        
        // Smooth scrolling with navbar offset
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (!target) return;
                const navbar = document.querySelector('.navbar');
                const offset = navbar ? (navbar.offsetHeight + 16) : 0;
                const top = target.getBoundingClientRect().top + window.pageYOffset - offset;
                window.scrollTo({ top, behavior: 'smooth' });
            });
        });

        // Typing animation function (substring-based, cepat dan stabil)
        function typeWriter(element, text, speed, delay = 0) {
            setTimeout(() => {
                let i = 0;
                const full = text;
                element.textContent = '';
                element.style.whiteSpace = 'nowrap';
                element.style.borderRight = '2px solid #ffb300';
                element.style.opacity = '1';
                const timer = setInterval(() => {
                    if (i < full.length) {
                        element.textContent = full.substring(0, i + 1);
                        i++;
                    } else {
                        clearInterval(timer);
                        element.classList.add('typing-done');
                        element.style.borderRight = 'none';
                        element.style.animation = 'none';
                        element.style.whiteSpace = 'normal';
                    }
                }, speed);
            }, delay);
        }

        // Fade in animation function
        function fadeIn(element, delay = 0) {
            setTimeout(() => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(20px)';
                element.style.transition = 'opacity 1s ease, transform 1s ease';
                
                setTimeout(() => {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }, 100);
            }, delay);
        }

        // Start typing animations when page loads
        window.addEventListener('load', () => {
            const subtitle = document.querySelector('.typing-text');
            const greeting = document.querySelector('.hero-title');
            document.querySelectorAll('.exp-toolbar .toolbar-btn[data-bs-target]').forEach(btn => {
                const targetSel = btn.getAttribute('data-bs-target');
                const target = document.querySelector(targetSel);
                if (!target) return;
                target.addEventListener('show.bs.collapse', () => {
                    const icon = btn.querySelector('i');
                    if (icon) { icon.classList.remove('fa-chevron-down'); icon.classList.add('fa-chevron-up'); }
                });
                target.addEventListener('hide.bs.collapse', () => {
                    const icon = btn.querySelector('i');
                    if (icon) { icon.classList.remove('fa-chevron-up'); icon.classList.add('fa-chevron-down'); }
                });
            });
            document.querySelectorAll('[data-bs-toggle="collapse"]').forEach(btn => {
                const targetSel = btn.getAttribute('data-bs-target');
                const target = document.querySelector(targetSel);
                if (!target) return;
                const icon = btn.querySelector('i');
                target.addEventListener('show.bs.collapse', () => { if (icon) { icon.classList.remove('fa-chevron-down'); icon.classList.add('fa-chevron-up'); } });
                target.addEventListener('hide.bs.collapse', () => { if (icon) { icon.classList.remove('fa-chevron-up'); icon.classList.add('fa-chevron-down'); } });
            });
            
            // Fade in greeting first
            if (greeting) {
                fadeIn(greeting, 200);
            }
            
            // Start subtitle typing after greeting fades in
            if (subtitle) {
                typeWriter(subtitle, subtitle.textContent, 40, 400);
            }
        });

        // CV Functions
        function viewCV() {
            const cvUrl = '/cv';
            window.open(cvUrl, '_blank');
        }

        function downloadCV() {
            const cvUrl = '/cv/download';
            const link = document.createElement('a');
            link.href = cvUrl;
            link.click();
        }

        // Contact form submission
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const messageAlert = document.getElementById('messageAlert');
            const formData = new FormData(this);
            
            // Disable submit button and show loading
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Mengirim...';
            
            // Hide previous alerts
            messageAlert.style.display = 'none';
            
            fetch('/send_message', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    messageAlert.className = 'alert alert-success';
                    messageAlert.innerHTML = '<i class="fas fa-check-circle me-2"></i>' + data.message;
                    document.getElementById('contactForm').reset();
                } else {
                    messageAlert.className = 'alert alert-danger';
                    messageAlert.innerHTML = '<i class="fas fa-exclamation-circle me-2"></i>' + data.message;
                }
                messageAlert.style.display = 'block';
            })
            .catch(error => {
                messageAlert.className = 'alert alert-danger';
                messageAlert.innerHTML = '<i class="fas fa-exclamation-circle me-2"></i>Terjadi kesalahan saat mengirim pesan.';
                messageAlert.style.display = 'block';
            })
            .finally(() => {
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Kirim Pesan';
            });
        });
    </script>
    <!-- PDF.js (render PDF to canvas, hides browser PDF toolbar) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.477/pdf.min.js"></script>
    <script>
        // Render first page of any PDF certificate into its canvas
        (function(){
            if (typeof pdfjsLib === 'undefined') return;
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.477/pdf.worker.min.js';

            document.querySelectorAll('.cert-pdf').forEach(function(container){
                var url = container.getAttribute('data-pdf-url');
                if (!url) return;

                var canvas = container.querySelector('.pdf-canvas');
                var ctx = canvas.getContext('2d');

                // Load PDF and render first page
                pdfjsLib.getDocument(url).promise.then(function(pdf){
                    return pdf.getPage(1);
                }).then(function(page){
                    var viewport = page.getViewport({scale: 1});
                    // Fit width to container
                    var desiredWidth = container.clientWidth || 600;
                    var scale = desiredWidth / viewport.width;
                    var scaledViewport = page.getViewport({scale: scale});

                    canvas.width = Math.floor(scaledViewport.width);
                    canvas.height = Math.floor(scaledViewport.height);
                    canvas.style.width = canvas.width + 'px';
                    canvas.style.height = canvas.height + 'px';

                    var renderContext = {
                        canvasContext: ctx,
                        viewport: scaledViewport
                    };
                    page.render(renderContext);
                }).catch(function(err){
                    console.error('PDF render error', err);
                    // on error, hide canvas and leave fallback link visible
                    canvas.style.display = 'none';
                });
            });
        })();
    </script>
</body>
</html>
